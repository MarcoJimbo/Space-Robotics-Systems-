function[M] = mass_matrix(q)

    %%% function che in funzione delle variabili di giunto costruisce la
    %%% matrice di massa del manipolatore. IMPORTANTE va aggiornata
    %%% l'espressione ogni volta che vengono cambiate le caratteristiche
    %%% fisiche del manipolatore.

    % INPUT:
    % q:                    double [nx1] = variabili di giunto

    % OUTPUT:
    % M:                    double [nxn] = matrice di massa

    % estrazione componenti input
    q1 = q(1);
    q2 = q(2);
    q3 = q(3);
    q4 = q(4);
    q5 = q(5);
    
    % determinazione matrice di massa
    M = [(3245847*pi)/6400000 + (75509757275879979*cos(2*q2 + 2*q3 + 2*q4 + 2*q5))/36893488147419103232 + (1418544105622460673*cos(2*q2))/18446744073709551616 + (75509757275879979*cos(2*q2 + 2*q3 + 2*q4))/36893488147419103232 + (523187873391410013*cos(2*q2 + 2*q3))/18446744073709551616 + (31119*pi*cos(2*q2 + 2*q3))/256000 + (28413*pi*cos(2*q2 + q3 + q4))/320000 + (28413*pi*cos(q3 + q4))/320000 + (1353*pi*cos(q4 + q5))/80000 + (1353*pi*cos(2*q2 + 2*q3 + 2*q4 + q5))/200000 + (66297*pi*cos(q3))/160000 + (4059*pi*cos(q4))/64000 + (1353*pi*cos(q5))/200000 + (4059*pi*cos(2*q2 + 2*q3 + q4))/64000 + (9471*pi*cos(2*q2 + q3 + q4 + q5))/400000 + (66297*pi*cos(2*q2 + q3))/160000 + (1353*pi*cos(2*q2 + 2*q3 + 2*q4 + 2*q5))/800000 + (9471*pi*cos(q3 + q4 + q5))/400000 + (596673*pi*cos(2*q2))/1600000 + (17589*pi*cos(2*q2 + 2*q3 + 2*q4))/1600000 + (1353*pi*cos(2*q2 + 2*q3 + q4 + q5))/80000 + 2046645211270085687/18446744073709551616,                                                                                                                                                                                                                                                0,                                                                                                                                                                                                                                              0,                                                                                                                                                                                                                  0,                                                                                                                                                     0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0, (3245847*pi)/3200000 + (28413*pi*cos(q3 + q4))/160000 + (1353*pi*cos(q4 + q5))/40000 + (66297*pi*cos(q3))/80000 + (4059*pi*cos(q4))/32000 + (1353*pi*cos(q5))/100000 + (9471*pi*cos(q3 + q4 + q5))/200000 + 63498233555622443/288230376151711744, (171831*pi)/640000 + (85239*pi*cos(q3 + q4))/800000 + (1353*pi*cos(q4 + q5))/40000 + (28413*pi*cos(q3))/64000 + (4059*pi*cos(q4))/32000 + (1353*pi*cos(q5))/100000 + (9471*pi*cos(q3 + q4 + q5))/400000 + 18967729937672163/288230376151711744, (4059*pi)/160000 + (85239*pi*cos(q3 + q4))/800000 + (1353*pi*cos(q4 + q5))/80000 + (12177*pi*cos(q4))/160000 + (1353*pi*cos(q5))/100000 + (9471*pi*cos(q3 + q4 + q5))/400000 + 2474537239013183/288230376151711744, (1353*pi)/400000 + (1353*pi*cos(q4 + q5))/80000 + (1353*pi*cos(q5))/200000 + (9471*pi*cos(q3 + q4 + q5))/400000 + 2474537239013183/576460752303423488;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0, (171831*pi)/640000 + (28413*pi*cos(q3 + q4))/400000 + (1353*pi*cos(q4 + q5))/40000 + (123123*pi*cos(q3))/320000 + (4059*pi*cos(q4))/32000 + (1353*pi*cos(q5))/100000 + (9471*pi*cos(q3 + q4 + q5))/400000 + 18967729937672163/288230376151711744,                                                                                                  (171831*pi)/640000 + (1353*pi*cos(q4 + q5))/40000 + (4059*pi*cos(q4))/32000 + (1353*pi*cos(q5))/100000 + 18967729937672163/288230376151711744,                                                                       (4059*pi)/160000 + (1353*pi*cos(q4 + q5))/80000 + (12177*pi*cos(q4))/160000 + (1353*pi*cos(q5))/100000 + 2474537239013183/288230376151711744,                                      (1353*pi)/400000 + (1353*pi*cos(q4 + q5))/80000 + (1353*pi*cos(q5))/200000 + 2474537239013183/576460752303423488;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0,                                 (4059*pi)/160000 + (28413*pi*cos(q3 + q4))/400000 + (1353*pi*cos(q4 + q5))/80000 + (4059*pi*cos(q4))/80000 + (1353*pi*cos(q5))/100000 + (9471*pi*cos(q3 + q4 + q5))/400000 + 2474537239013183/288230376151711744,                                                                                                     (4059*pi)/160000 + (1353*pi*cos(q4 + q5))/80000 + (4059*pi*cos(q4))/80000 + (1353*pi*cos(q5))/100000 + 2474537239013183/288230376151711744,                                                                                                                                  (4059*pi)/160000 + (1353*pi*cos(q5))/100000 + 2474537239013183/288230376151711744,                                                                     (1353*pi)/400000 + (1353*pi*cos(q5))/200000 + 2474537239013183/576460752303423488;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0,                                                                                            (1353*pi)/400000 + (1353*pi*cos(q4 + q5))/80000 + (1353*pi*cos(q5))/200000 + (9471*pi*cos(q3 + q4 + q5))/400000 + 2474537239013183/576460752303423488,                                                                                                                               (1353*pi)/400000 + (1353*pi*cos(q4 + q5))/80000 + (1353*pi*cos(q5))/200000 + 2474537239013183/576460752303423488,                                                                                                                                  (1353*pi)/400000 + (1353*pi*cos(q5))/200000 + 2474537239013183/576460752303423488,                                                                                                (1353*pi)/400000 + 2474537239013183/576460752303423488];
    % fine matrice
          
end